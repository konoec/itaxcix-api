<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administration Panel - Audit Reports</title>
    <link rel="icon" type="image/png" href="../../assets/Recourse/Logo/1.png">
    <link rel="shortcut icon" href="../../assets/Recourse/Logo/1.png">
    
    <!-- Tabler CSS Framework -->
    <link rel="stylesheet" href="../../assets/tabler/css/tabler.min.css">
    <link rel="stylesheet" href="../../assets/tabler/css/tabler-vendors.min.css">
    <link rel="stylesheet" href="../../assets/css/global-toast.css">
    <link rel="stylesheet" href="../../assets/css/sidebar.css">
    <link rel="stylesheet" href="../../assets/css/topbar.css">
    <link rel="stylesheet" href="../../assets/css/profile.css">
    <link rel="stylesheet" href="../../assets/css/audit/audit-reports.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Configuración de la página -->
    <script>
        window.pageConfig = {
            activeSection: 'auditoria',
            pageTitle: {
                icon: 'fas fa-chart-bar',
                text: 'Reportes de Auditoría'
            }
        };
    </script>
    
</head>
<body>
    <!-- Contenedor principal del layout usando estructura Tabler -->
    <div class="page">
        <!-- Contenedor del sidebar - se carga dinámicamente -->
        <div id="sidebar-container"></div>

        <!-- Contenido principal usando estructura Tabler -->
        <div class="page-wrapper">
            <!-- Contenedor del topbar - se carga dinámicamente -->
            <div id="topbar-container"></div>
            
            <!-- Contenido principal de la página -->
            <div class="page-body">
                <div class="container-xl">
                    <!-- Contenido principal de reportes -->
                    <div class="incidents-main-container">
                    <!-- Selector de tipo de reporte -->
                    <div class="report-type-selector">
                        <div class="filter-group">
                            <label for="report-type-select">Tipo de Reporte</label>
                            <select id="report-type-select">
                                <option value="" selected>Sin filtro</option>
                                <option value="incidents">Incidentes</option>
                                <option value="vehicles">Vehículos</option>
                                <option value="infractions">Infracciones</option>
                                <option value="travels">Viajes</option>
                                <option value="ratings">Calificaciones</option>
                                <option value="usuarios">Usuarios</option>
                            </select>
                        </div>
                    </div>

                    <!-- Mensaje para estado "Sin filtro" -->
                    <div id="no-report-selected" class="no-report-state" style="display: block;">
                        <div class="no-report-content">
                            <div class="no-report-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h3>Selecciona un tipo de reporte</h3>
                            <p>Elige "Incidentes", "Vehículos", "Infracciones", "Viajes", "Calificaciones" o "Usuarios" en el selector de tipo de reporte para ver los datos disponibles.</p>
                        </div>
                    </div>

                    <!-- Panel de filtros -->
                    <div class="incidents-filters-card">
                        <div class="card-header">
                            <button id="toggle-filters" class="btn-toggle-filters">
                                <i class="fas fa-chevron-up"></i>
                            </button>
                        </div>
                        <div class="filters-content" id="filters-content">
                            <!-- Filtros para Incidentes -->
                            <div id="incidents-filters" class="filters-section" style="display: none;">
                                <div class="filters-grid">
                                    <!-- Primera fila de filtros -->
                                    <div class="filter-group">
                                        <label for="filter-user-id">ID de Usuario</label>
                                        <input type="number" id="filter-user-id" placeholder="Ingrese ID de usuario" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-travel-id">ID de Viaje</label>
                                        <input type="number" id="filter-travel-id" placeholder="Ingrese ID de viaje" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-type-id">ID de Tipo</label>
                                        <input type="number" id="filter-type-id" placeholder="Ingrese ID de tipo" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-active">Estado Activo</label>
                                        <select id="filter-active">
                                            <option value="">Todos los estados</option>
                                            <option value="true">Activo</option>
                                            <option value="false">Inactivo</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Segunda fila de filtros -->
                                    <div class="filter-group filter-wide">
                                        <label for="filter-comment">Comentario</label>
                                        <input type="text" id="filter-comment" placeholder="Buscar en comentarios...">
                                    </div>
                                    <div class="filter-group">
                                        <label for="sort-by">Ordenar Por</label>
                                        <select id="sort-by">
                                            <option value="id">ID</option>
                                            <option value="userId">ID de Usuario</option>
                                            <option value="travelId">ID de Viaje</option>
                                            <option value="typeId">ID de Tipo</option>
                                            <option value="active">Estado Activo</option>
                                        </select>
                                    </div>
                                    <div class="filter-group">
                                        <label for="sort-direction">Dirección</label>
                                        <select id="sort-direction">
                                            <option value="DESC">Descendente</option>
                                            <option value="ASC">Ascendente</option>
                                        </select>
                                    </div>
                                    <div class="filter-group">
                                        <label for="per-page">Por Página</label>
                                        <select id="per-page">
                                            <option value="10">10</option>
                                            <option value="20" selected>20</option>
                                            <option value="50">50</option>
                                            <option value="100">100</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Botones de acción como parte del grid -->
                                    <div class="filter-group filter-actions-group">
                                        <label>&nbsp;</label>
                                        <div class="filter-actions-inline">
                                            <button id="apply-filters-btn" class="btn btn-primary" title="Aplicar Filtros">
                                                <i class="fas fa-search"></i>
                                            </button>
                                            <button id="clear-filters-btn" class="btn btn-secondary" title="Limpiar Filtros">
                                                <i class="fas fa-eraser"></i>
                                            </button>
                                            <button id="refresh-data-btn" class="btn btn-info" title="Actualizar">
                                                <i class="fas fa-sync-alt"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Filtros para Vehículos -->
                            <div id="vehicles-filters" class="filters-section" style="display: none;">
                                <div class="filters-grid">
                                    <!-- Primera fila de filtros -->
                                    <div class="filter-group">
                                        <label for="filter-license-plate">Placa</label>
                                        <input type="text" id="filter-license-plate" placeholder="Ingrese placa del vehículo">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-brand-id">ID Marca</label>
                                        <input type="number" id="filter-brand-id" placeholder="ID de la marca" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-model-id">ID Modelo</label>
                                        <input type="number" id="filter-model-id" placeholder="ID del modelo" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-color-id">ID Color</label>
                                        <input type="number" id="filter-color-id" placeholder="ID del color" min="1">
                                    </div>
                                    
                                    <!-- Segunda fila de filtros -->
                                    <div class="filter-group">
                                        <label for="filter-manufacture-year-from">Año Desde</label>
                                        <input type="number" id="filter-manufacture-year-from" placeholder="Año fabricación desde" min="1900" max="2030">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-manufacture-year-to">Año Hasta</label>
                                        <input type="number" id="filter-manufacture-year-to" placeholder="Año fabricación hasta" min="1900" max="2030">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-seat-count">Asientos</label>
                                        <input type="number" id="filter-seat-count" placeholder="Número de asientos" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-passenger-count">Pasajeros</label>
                                        <input type="number" id="filter-passenger-count" placeholder="Número de pasajeros" min="1">
                                    </div>

                                    <!-- Tercera fila de filtros -->
                                    <div class="filter-group">
                                        <label for="filter-fuel-type-id">ID Combustible</label>
                                        <input type="number" id="filter-fuel-type-id" placeholder="ID tipo combustible" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-vehicle-class-id">ID Clase</label>
                                        <input type="number" id="filter-vehicle-class-id" placeholder="ID clase vehículo" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-category-id">ID Categoría</label>
                                        <input type="number" id="filter-category-id" placeholder="ID categoría" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-vehicle-active">Estado</label>
                                        <select id="filter-vehicle-active">
                                            <option value="">Todos los estados</option>
                                            <option value="true">Activo</option>
                                            <option value="false">Inactivo</option>
                                        </select>
                                    </div>

                                    <!-- Cuarta fila de filtros adicionales -->
                                    <div class="filter-group">
                                        <label for="filter-company-id">ID Empresa</label>
                                        <input type="number" id="filter-company-id" placeholder="ID empresa" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-district-id">ID Distrito</label>
                                        <input type="number" id="filter-district-id" placeholder="ID distrito" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-status-id">ID Estado</label>
                                        <input type="number" id="filter-status-id" placeholder="ID estado" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-procedure-type-id">ID Procedimiento</label>
                                        <input type="number" id="filter-procedure-type-id" placeholder="ID procedimiento" min="1">
                                    </div>

                                    <!-- Quinta fila - ordenamiento -->
                                    <div class="filter-group">
                                        <label for="filter-modality-id">ID Modalidad</label>
                                        <input type="number" id="filter-modality-id" placeholder="ID modalidad" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="vehicle-sort-by">Ordenar Por</label>
                                        <select id="vehicle-sort-by">
                                            <option value="licensePlate">Placa</option>
                                            <option value="brandName">Marca</option>
                                            <option value="modelName">Modelo</option>
                                            <option value="manufactureYear">Año</option>
                                            <option value="active">Estado</option>
                                        </select>
                                    </div>                                    <div class="filter-group">
                                        <label for="vehicle-sort-direction">Dirección</label>
                                        <select id="vehicle-sort-direction">
                                            <option value="ASC">Ascendente</option>
                                            <option value="DESC">Descendente</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Botones de acción como parte del grid -->
                                    <div class="filter-group filter-actions-group">
                                        <label>&nbsp;</label>
                                        <div class="filter-actions-inline">
                                            <button id="apply-filters-btn-vehicles" class="btn btn-primary" title="Aplicar Filtros">
                                                <i class="fas fa-search"></i>
                                            </button>
                                            <button id="clear-filters-btn-vehicles" class="btn btn-secondary" title="Limpiar Filtros">
                                                <i class="fas fa-eraser"></i>
                                            </button>
                                            <button id="refresh-data-btn-vehicles" class="btn btn-info" title="Actualizar">
                                                <i class="fas fa-sync-alt"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Filtros para Infracciones -->
                            <div id="infractions-filters" class="filters-section" style="display: none;">
                                <div class="filters-grid">
                                    <!-- Primera fila de filtros -->
                                    <div class="filter-group">
                                        <label for="filter-infraction-user-id">ID de Usuario</label>
                                        <input type="number" id="filter-infraction-user-id" placeholder="ID del usuario" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-severity-id">ID Severidad</label>
                                        <input type="number" id="filter-severity-id" placeholder="ID de severidad" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-infraction-status-id">ID Estado</label>
                                        <input type="number" id="filter-infraction-status-id" placeholder="ID del estado" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-date-from">Fecha Desde</label>
                                        <input type="date" id="filter-date-from">
                                    </div>
                                    
                                    <!-- Segunda fila de filtros -->
                                    <div class="filter-group">
                                        <label for="filter-date-to">Fecha Hasta</label>
                                        <input type="date" id="filter-date-to">
                                    </div>
                                    <div class="filter-group filter-wide">
                                        <label for="filter-infraction-description">Descripción</label>
                                        <input type="text" id="filter-infraction-description" placeholder="Buscar en descripciones...">
                                    </div>
                                    <div class="filter-group">
                                        <label for="infraction-sort-by">Ordenar Por</label>
                                        <select id="infraction-sort-by">
                                            <option value="id">ID</option>
                                            <option value="userId">ID de Usuario</option>
                                            <option value="severityId">ID Severidad</option>
                                            <option value="statusId">ID Estado</option>
                                            <option value="date">Fecha</option>
                                        </select>
                                    </div>
                                    <div class="filter-group">
                                        <label for="infraction-sort-direction">Dirección</label>
                                        <select id="infraction-sort-direction">
                                            <option value="DESC">Descendente</option>
                                            <option value="ASC">Ascendente</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Botones de acción como parte del grid -->
                                    <div class="filter-group filter-actions-group">
                                        <label>&nbsp;</label>
                                        <div class="filter-actions-inline">
                                            <button id="apply-filters-btn-infractions" class="btn btn-primary" title="Aplicar Filtros">
                                                <i class="fas fa-search"></i>
                                            </button>
                                            <button id="clear-filters-btn-infractions" class="btn btn-secondary" title="Limpiar Filtros">
                                                <i class="fas fa-eraser"></i>
                                            </button>
                                            <button id="refresh-data-btn-infractions" class="btn btn-info" title="Actualizar">
                                                <i class="fas fa-sync-alt"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Filtros para Viajes -->
                            <div id="travels-filters" class="filters-section" style="display: none;">
                                <div class="filters-grid">
                                    <!-- Primera fila de filtros -->
                                    <div class="filter-group">
                                        <label for="filter-citizen-id">ID Ciudadano</label>
                                        <input type="number" id="filter-citizen-id" placeholder="ID del ciudadano" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-driver-id">ID Conductor</label>
                                        <input type="number" id="filter-driver-id" placeholder="ID del conductor" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-travel-status-id">ID Estado</label>
                                        <input type="number" id="filter-travel-status-id" placeholder="ID del estado" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-start-date">Fecha Inicio</label>
                                        <input type="date" id="filter-start-date">
                                    </div>
                                    
                                    <!-- Segunda fila de filtros -->
                                    <div class="filter-group">
                                        <label for="filter-end-date">Fecha Fin</label>
                                        <input type="date" id="filter-end-date">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-origin">Origen</label>
                                        <input type="text" id="filter-origin" placeholder="Buscar por origen...">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-destination">Destino</label>
                                        <input type="text" id="filter-destination" placeholder="Buscar por destino...">
                                    </div>
                                    <div class="filter-group">
                                        <label for="travel-sort-by">Ordenar Por</label>
                                        <select id="travel-sort-by">
                                            <option value="creationDate">Fecha de Creación</option>
                                            <option value="startDate">Fecha de Inicio</option>
                                            <option value="endDate">Fecha de Fin</option>
                                            <option value="citizenId">ID Ciudadano</option>
                                            <option value="driverId">ID Conductor</option>
                                            <option value="statusId">ID Estado</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Tercera fila -->
                                    <div class="filter-group">
                                        <label for="travel-sort-direction">Dirección</label>
                                        <select id="travel-sort-direction">
                                            <option value="DESC">Descendente</option>
                                            <option value="ASC">Ascendente</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Botones de acción como parte del grid -->
                                    <div class="filter-group filter-actions-group">
                                        <label>&nbsp;</label>
                                        <div class="filter-actions-inline">
                                            <button id="apply-filters-btn-travels" class="btn btn-primary" title="Aplicar Filtros">
                                                <i class="fas fa-search"></i>
                                            </button>
                                            <button id="clear-filters-btn-travels" class="btn btn-secondary" title="Limpiar Filtros">
                                                <i class="fas fa-eraser"></i>
                                            </button>
                                            <button id="refresh-data-btn-travels" class="btn btn-info" title="Actualizar">
                                                <i class="fas fa-sync-alt"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Filtros para Calificaciones -->
                            <div id="ratings-filters" class="filters-section" style="display: none;">
                                <div class="filters-grid">
                                    <!-- Primera fila de filtros -->
                                    <div class="filter-group">
                                        <label for="filter-rater-id">ID Calificador</label>
                                        <input type="number" id="filter-rater-id" placeholder="ID del calificador" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-rated-id">ID Calificado</label>
                                        <input type="number" id="filter-rated-id" placeholder="ID del calificado" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-travel-id">ID Viaje</label>
                                        <input type="number" id="filter-travel-id" placeholder="ID del viaje" min="1">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-min-score">Puntaje Mínimo</label>
                                        <input type="number" id="filter-min-score" placeholder="Puntaje mínimo" min="1" max="5">
                                    </div>

                                    <!-- Segunda fila de filtros -->
                                    <div class="filter-group">
                                        <label for="filter-max-score">Puntaje Máximo</label>
                                        <input type="number" id="filter-max-score" placeholder="Puntaje máximo" min="1" max="5">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-comment">Comentario</label>
                                        <input type="text" id="filter-comment" placeholder="Buscar en comentarios">
                                    </div>
                                    <div class="filter-group">
                                        <label for="rating-sort-by">Ordenar Por</label>
                                        <select id="rating-sort-by">
                                            <option value="id">ID</option>
                                            <option value="raterId">ID Calificador</option>
                                            <option value="ratedId">ID Calificado</option>
                                            <option value="travelId">ID Viaje</option>
                                            <option value="score">Puntaje</option>
                                        </select>
                                    </div>
                                    <div class="filter-group">
                                        <label for="rating-sort-direction">Dirección</label>
                                        <select id="rating-sort-direction">
                                            <option value="DESC">Descendente</option>
                                            <option value="ASC">Ascendente</option>
                                        </select>
                                    </div>

                                    <!-- Botones de acción como parte del grid -->
                                    <div class="filter-group filter-actions-group">
                                        <label>&nbsp;</label>
                                        <div class="filter-actions-inline">
                                            <button id="apply-filters-btn-ratings" class="btn btn-primary" title="Aplicar Filtros">
                                                <i class="fas fa-search"></i>
                                            </button>
                                            <button id="clear-filters-btn-ratings" class="btn btn-secondary" title="Limpiar Filtros">
                                                <i class="fas fa-eraser"></i>
                                            </button>
                                            <button id="refresh-data-btn-ratings" class="btn btn-info" title="Actualizar">
                                                <i class="fas fa-sync-alt"></i>
                                            </button>
                                            <button id="export-btn-ratings" class="btn btn-success" title="Exportar">
                                                <i class="fas fa-download"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Filtros para Usuarios -->
                            <div id="users-filters" class="filters-section" style="display: none;">
                                <div class="filters-grid">
                                    <!-- Primera fila de filtros -->
                                    <div class="filter-group">
                                        <label for="filter-user-name">Nombre</label>
                                        <input type="text" id="filter-user-name" placeholder="Nombre del usuario" maxlength="50">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-user-lastname">Apellido</label>
                                        <input type="text" id="filter-user-lastname" placeholder="Apellido del usuario" maxlength="50">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-user-document">Documento</label>
                                        <input type="text" id="filter-user-document" placeholder="Número de documento" maxlength="20">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-user-document-type-id">Tipo de Documento</label>
                                        <select id="filter-user-document-type-id">
                                            <option value="">Todos los tipos</option>
                                            <option value="1">Cédula de Ciudadanía</option>
                                            <option value="2">Cédula de Extranjería</option>
                                            <option value="3">Pasaporte</option>
                                            <option value="4">Tarjeta de Identidad</option>
                                        </select>
                                    </div>

                                    <!-- Segunda fila de filtros -->
                                    <div class="filter-group">
                                        <label for="filter-user-email">Email</label>
                                        <input type="email" id="filter-user-email" placeholder="Email del usuario" maxlength="100">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-user-phone">Teléfono</label>
                                        <input type="text" id="filter-user-phone" placeholder="Número de teléfono" maxlength="15">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-user-status-id">Estado</label>
                                        <select id="filter-user-status-id">
                                            <option value="">Todos los estados</option>
                                            <option value="1">Pendiente</option>
                                            <option value="2">Verificado</option>
                                            <option value="3">Rechazado</option>
                                            <option value="4">Suspendido</option>
                                        </select>
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-user-active">Activo</label>
                                        <select id="filter-user-active">
                                            <option value="">Todos</option>
                                            <option value="true">Activo</option>
                                            <option value="false">Inactivo</option>
                                        </select>
                                    </div>

                                    <!-- Tercera fila de filtros -->
                                    <div class="filter-group">
                                        <label for="filter-user-validation-start-date">Fecha Validación (Desde)</label>
                                        <input type="date" id="filter-user-validation-start-date">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filter-user-validation-end-date">Fecha Validación (Hasta)</label>
                                        <input type="date" id="filter-user-validation-end-date">
                                    </div>
                                    <div class="filter-group">
                                        <label for="user-sort-by">Ordenar Por</label>
                                        <select id="user-sort-by">
                                            <option value="name">Nombre</option>
                                            <option value="lastName">Apellido</option>
                                            <option value="document">Documento</option>
                                            <option value="email">Email</option>
                                            <option value="phone">Teléfono</option>
                                            <option value="validationDate">Fecha Validación</option>
                                        </select>
                                    </div>
                                    <div class="filter-group">
                                        <label for="user-sort-direction">Dirección</label>
                                        <select id="user-sort-direction">
                                            <option value="ASC">Ascendente</option>
                                            <option value="DESC">Descendente</option>
                                        </select>
                                    </div>

                                    <!-- Botones de acción como parte del grid -->
                                    <div class="filter-group filter-actions-group">
                                        <label>&nbsp;</label>
                                        <div class="filter-actions-inline">
                                            <button id="apply-filters-btn-users" class="btn btn-primary" title="Aplicar Filtros">
                                                <i class="fas fa-search"></i>
                                            </button>
                                            <button id="clear-filters-btn-users" class="btn btn-secondary" title="Limpiar Filtros">
                                                <i class="fas fa-eraser"></i>
                                            </button>
                                            <button id="refresh-data-btn-users" class="btn btn-info" title="Actualizar">
                                                <i class="fas fa-sync-alt"></i>
                                            </button>
                                            <button id="export-btn-users" class="btn btn-success" title="Exportar">
                                                <i class="fas fa-download"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </div>
                    </div>

                    <!-- Contenedor de la tabla con estilo SHADCN -->
                    <div class="incidents-table-section" style="display: none;">
                        <div class="shadcn-table-container">
                            <!-- Loading state -->
                            <div id="incidents-loading" class="incidents-loading-state" style="display: none;">
                                <div class="shadcn-loading-state">
                                    <div class="shadcn-loading-spinner"></div>
                                    <p>Cargando reportes...</p>
                                </div>
                            </div>

                            <!-- Empty state -->
                            <div id="incidents-empty" class="incidents-empty-state" style="display: none;">
                                <div class="shadcn-empty-state">
                                    <div class="empty-icon">
                                        <i class="fas fa-inbox"></i>
                                    </div>
                                    <h3>No hay reportes disponibles</h3>
                                    <p>No se encontraron reportes con los criterios especificados.</p>
                                    <div class="empty-actions">
                                        <button id="clear-filters-empty-btn" class="shadcn-secondary-btn">
                                            <i class="fas fa-filter-circle-xmark"></i> Limpiar filtros
                                        </button>
                                        <button id="refresh-empty-btn" class="shadcn-primary-btn">
                                            <i class="fas fa-sync-alt"></i> Actualizar
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Error state -->
                            <div id="incidents-error" class="incidents-error-state" style="display: none;">
                                <div class="shadcn-error-state">
                                    <div class="error-icon">
                                        <i class="fas fa-exclamation-circle"></i>
                                    </div>
                                    <h3>Error al cargar reportes</h3>
                                    <p id="error-message">Ocurrió un error al cargar los reportes.</p>
                                    <button id="retry-btn" class="shadcn-primary-btn">
                                        <i class="fas fa-redo"></i> Reintentar
                                    </button>
                                </div>
                            </div>

                            <!-- Contenedor de scroll horizontal para la tabla -->
                            <div id="incidents-table-wrapper" class="shadcn-table-scroll">
                                <!-- Tabla SHADCN -->
                                <table class="shadcn-table">
                                    <thead>
                                        <tr id="incidents-headers">
                                            <th>ID</th>
                                            <th>Usuario</th>
                                            <th>ID Viaje</th>
                                            <th>Tipo</th>
                                            <th>Estado</th>
                                            <th>Comentario</th>
                                        </tr>
                                        <tr id="vehicles-headers" style="display: none;">
                                            <th>ID</th>
                                            <th>Placa</th>
                                            <th>Marca</th>
                                            <th>Modelo</th>
                                            <th>Color</th>
                                            <th>Año</th>
                                            <th>Asientos</th>
                                            <th>Pasajeros</th>
                                            <th>Combustible</th>
                                            <th>Clase Vehículo</th>
                                            <th>Categoría</th>
                                            <th>Estado</th>
                                            <th>Empresa</th>
                                            <th>Distrito</th>
                                            <th>Estado Vehículo</th>
                                            <th>Tipo Procedimiento</th>
                                            <th>Modalidad</th>
                                        </tr>
                                        <tr id="infractions-headers" style="display: none;">
                                            <th>ID</th>
                                            <th>Usuario</th>
                                            <th>Nombre Usuario</th>
                                            <th>Severidad</th>
                                            <th>Nombre Severidad</th>
                                            <th>Estado</th>
                                            <th>Nombre Estado</th>
                                            <th>Fecha</th>
                                            <th>Descripción</th>
                                        </tr>
                                        <tr id="travels-headers" style="display: none;">
                                            <th>ID</th>
                                            <th>Ciudadano</th>
                                            <th>Conductor</th>
                                            <th>Origen</th>
                                            <th>Destino</th>
                                            <th>Fecha Inicio</th>
                                            <th>Fecha Fin</th>
                                            <th>Fecha Creación</th>
                                            <th>Estado</th>
                                        </tr>
                                        <tr id="ratings-headers" style="display: none;">
                                            <th>ID</th>
                                            <th>ID Calificador</th>
                                            <th>Calificador</th>
                                            <th>ID Calificado</th>
                                            <th>Calificado</th>
                                            <th>ID Viaje</th>
                                            <th>Puntaje</th>
                                            <th>Comentario</th>
                                        </tr>
                                        <tr id="users-headers" style="display: none;">
                                            <th>ID</th>
                                            <th>Nombre</th>
                                            <th>Apellido</th>
                                            <th>Documento</th>
                                            <th>Tipo Doc.</th>
                                            <th>Estado</th>
                                            <th>Email</th>
                                            <th>Teléfono</th>
                                            <th>Status</th>
                                            <th>Fecha Validación</th>
                                        </tr>
                                    </thead>
                                    <tbody id="incidents-table-body">
                                        <!-- Los datos se cargarán dinámicamente -->
                                    </tbody>
                                </table>
                            </div>

                            <!-- Controles de paginación con SHADCN -->
                            <div id="incidents-pagination" class="shadcn-pagination">
                                <div class="shadcn-pagination-info">
                                    <span id="pagination-info-text">Mostrando 1-20 de 100 resultados</span>
                                </div>
                                <div class="shadcn-pagination-controls">
                                    <button id="prev-page-btn" class="shadcn-pagination-btn" disabled>
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button id="next-page-btn" class="shadcn-pagination-btn">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                <div class="shadcn-pagination-size">
                                    <label for="page-size-select">Elementos por página:</label>
                                    <select id="page-size-select" class="shadcn-select">
                                        <option value="10">10</option>
                                        <option value="20" selected>20</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    
    <!-- Contenedor para modales dinámicos -->
    <div id="modal-container"></div>

    <!-- Sistema de notificaciones toast -->
    <div id="toast" class="toast">
        <div id="toast-message">Operation completed successfully</div>
    </div>

    <!-- Toast notification for reports operations -->
    <div id="recovery-toast" class="recovery-toast">
        <div class="recovery-toast-content">
            <i class="fas fa-check-circle"></i>
            <span id="recovery-toast-message">Report operation successful</span>
        </div>
    </div>
    
    <!-- Pantalla de carga global reutilizable -->
    <div id="permissions-loading" class="permissions-loading-overlay">
        <div class="loading-content">
            <div class="loading-car">🚕</div>
            <h2 class="loading-title">Loading Audit Reports</h2>
            <p class="loading-message">
                We are setting up your session and checking audit report permissions...
            </p>
            <p class="loading-steps">
                <span id="loading-step">Validating credentials...</span>
            </p>
        </div>
    </div>
    
    <!-- Scripts de Tabler -->
    <script src="../../assets/tabler/js/tabler.min.js"></script>
    
    <!-- Scripts básicos del sistema -->
    <script src="../../assets/js/auth/auth-checker.js"></script>
    <script src="../../assets/js/auth/permissions.js"></script>
    <script src="../../assets/js/auth/route-guard.js"></script>
    
    <!-- Scripts de servicios -->
    <script src="../../assets/js/api/services/profile-service.js"></script>
    <script src="../../assets/js/api/services/Audit/incident-reports-service.js"></script>
    <script src="../../assets/js/api/services/Audit/vehicle-reports-service.js"></script>
    <script src="../../assets/js/api/services/Audit/infraction-reports-service.js"></script>
    <script src="../../assets/js/api/services/Audit/travel-reports-service.js"></script>
    <script src="../../assets/js/api/services/Audit/rating-reports-service.js"></script>
    <script src="../../assets/js/api/services/Audit/user-reports-service.js"></script>
    
    <!-- Scripts de UI -->
    <script src="../../assets/js/ui/component-loader.js"></script>
    <script src="../../assets/js/ui/global-toast.js"></script>
    
    <!-- Scripts de controladores base (ANTES del MainController) -->
    <script src="../../assets/js/ui/controllers/Components/sidebar-controller.js"></script>
    <script src="../../assets/js/ui/controllers/Components/topbar-controller.js"></script>
    <script src="../../assets/js/ui/controllers/Components/profile-controller.js"></script>
    
    <!-- Controladores de reportes de auditoría -->
    <script src="../../assets/js/ui/controllers/Audit/base-reports-controller.js"></script>
    <script src="../../assets/js/ui/controllers/Audit/incident-reports-controller.js"></script>
    <script src="../../assets/js/ui/controllers/Audit/vehicle-reports-controller.js"></script>
    <script src="../../assets/js/ui/controllers/Audit/infraction-reports-controller.js"></script>
    <script src="../../assets/js/ui/controllers/Audit/travel-reports-controller.js"></script>
    <script src="../../assets/js/ui/controllers/Audit/rating-reports-controller.js"></script>
    <script src="../../assets/js/ui/controllers/Audit/user-reports-controller.js"></script>
    <script src="../../assets/js/ui/controllers/Audit/audit-reports-main-controller.js"></script>
    
    <!-- Inicializadores -->
    <script src="../../assets/js/ui/initializers/Audit/audit-reports-initializer.js"></script>
    <script src="../../assets/js/global-initializer.js"></script>

</body>
</html>

